<ion-content>
    <ion-row>
        <ion-col size="9">
            <form #form="ngForm" (ngSubmit)="getItem(form)">
                <ion-item>
                    <ion-label position="floating">Solicitud ID</ion-label>
                    <ion-input type="number" ngModel required="true" name="id"></ion-input>
                </ion-item>
            </form>
        </ion-col>
        <ion-col size="2" style="display: flex; align-items: center">
            <ion-button (click)="form.ngSubmit.emit()">
                <ion-icon name="search"></ion-icon>
            </ion-button>
        </ion-col>
    </ion-row>

    <ion-card *ngIf="solicitud">
        <ion-card-header class="ion-text-center">
            <ion-icon name="document" size="large"></ion-icon>
            <p>{{solicitud.alias}}</p>
        </ion-card-header>
        <ion-card-content>
            <ion-segment [(ngModel)]="segment" (ionChange)="segmentChanged($event)" [swipeGesture]="true">
                <ion-segment-button value="filtros">
                    <ion-label>Filtros</ion-label>
                </ion-segment-button>
                <ion-segment-button value="archivos">
                    <ion-label>Archivos</ion-label>
                </ion-segment-button>
            </ion-segment>

            <div class="ion-margin-top">
                <p>Empresa: {{solicitud.empresas.join(',')}}</p>
            </div>

            <div *ngIf="segment === 'archivos'">
                <ion-list lines="none">
                    <ion-item *ngFor="let file of solicitud.archivos | entries">
                        <ion-row>
                            <ion-col size="10">
                                {{file[0]}}
                            </ion-col>
                            <ion-col size="2" class="ion-text-end">
                                <ion-icon name="checkmark-circle" color="success" *ngIf="file[1]"></ion-icon>
                                <ion-icon name="close-circle" color="danger" *ngIf="!file[1]"></ion-icon>
                            </ion-col>
                        </ion-row>
                    </ion-item>
                </ion-list>
            </div>
            <div *ngIf="segment === 'filtros'">
                <ion-list lines="none">
                    <ion-item *ngFor="let filtro of solicitud.filtros[0] | entries">
                        {{filtro}}
                    </ion-item>
                </ion-list>
            </div>
        </ion-card-content>
    </ion-card>
</ion-content>
